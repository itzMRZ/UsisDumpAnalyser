<script>
// Modify the findTimeMatches function
function findTimeMatches(springCourse) {
    const matches = [];
    const springTimes = extractTimeSlots(springCourse.classSchedule);

    // Check Fall 24
    if (semesterData.fall) {
        semesterData.fall.forEach(course => {
            const fallTimes = extractTimeSlots(course.classSchedule);
            if (compareTimeSlots(springTimes, fallTimes)) {
                matches.push({
                    semester: 'Fall-24',
                    initial: course.empShortName
                });
            }
        });
    }

    // Check Summer 24
    if (semesterData.summer) {
        semesterData.summer.forEach(course => {
            const summerTimes = extractTimeSlots(course.classSchedule);
            if (compareTimeSlots(springTimes, summerTimes)) {
                matches.push({
                    semester: 'Summer-24',
                    initial: course.empShortName
                });
            }
        });
    }

    // Remove duplicates
    const uniqueMatches = [];
    const seen = new Set();
    matches.forEach(m => {
        const key = `${m.semester}-${m.initial}`;
        if (!seen.has(key)) {
            seen.add(key);
            uniqueMatches.push(m);
        }
    });

    return uniqueMatches;
}

// Update the faculty cell rendering
processedData.forEach(course => {
    // ... existing code ...
    
    let facultyBadges = '';
    if (semester === 'spring') {
        const timeMatches = findTimeMatches(course);
        if (timeMatches.length > 0) {
            facultyBadges = timeMatches.map(m => 
                `<span class="time-badge">(${m.semester}: ${m.initial})</span>`
            ).join(' ');
        }
    }

    row.innerHTML = `
        <td>${course.courseCode}-[${section}]</td>
        <td>
            ${course.empShortName}
            ${facultyBadges}
        </td>
        <td>${facultyCell}</td>
        <td>${(course.classSchedule || '').replace(/\n/g, '<br>')}</td>
        <td>${(course.examDate || '').replace(/\n/g, '<br>')}</td>
    `;

    // ... rest of the code ...
});

// Add to your CSS
.time-badge {
    display: inline-block;
    background-color: #e6f4ea;
    color: #137333;
    font-size: 0.8em;
    padding: 2px 6px;
    border-radius: 4px;
    margin-left: 5px;
    border: 1px solid #b7e1cd;
}
</script><script>
// Modify the findTimeMatches function
function findTimeMatches(springCourse) {
    const matches = [];
    const springTimes = extractTimeSlots(springCourse.classSchedule);

    // Check Fall 24
    if (semesterData.fall) {
        semesterData.fall.forEach(course => {
            const fallTimes = extractTimeSlots(course.classSchedule);
            if (compareTimeSlots(springTimes, fallTimes)) {
                matches.push({
                    semester: 'Fall-24',
                    initial: course.empShortName
                });
            }
        });
    }

    // Check Summer 24
    if (semesterData.summer) {
        semesterData.summer.forEach(course => {
            const summerTimes = extractTimeSlots(course.classSchedule);
            if (compareTimeSlots(springTimes, summerTimes)) {
                matches.push({
                    semester: 'Summer-24',
                    initial: course.empShortName
                });
            }
        });
    }

    // Remove duplicates
    const uniqueMatches = [];
    const seen = new Set();
    matches.forEach(m => {
        const key = `${m.semester}-${m.initial}`;
        if (!seen.has(key)) {
            seen.add(key);
            uniqueMatches.push(m);
        }
    });

    return uniqueMatches;
}

// Update the faculty cell rendering
processedData.forEach(course => {
    // ... existing code ...
    
    let facultyBadges = '';
    if (semester === 'spring') {
        const timeMatches = findTimeMatches(course);
        if (timeMatches.length > 0) {
            facultyBadges = timeMatches.map(m => 
                `<span class="time-badge">(${m.semester}: ${m.initial})</span>`
            ).join(' ');
        }
    }

    row.innerHTML = `
        <td>${course.courseCode}-[${section}]</td>
        <td>
            ${course.empShortName}
            ${facultyBadges}
        </td>
        <td>${facultyCell}</td>
        <td>${(course.classSchedule || '').replace(/\n/g, '<br>')}</td>
        <td>${(course.examDate || '').replace(/\n/g, '<br>')}</td>
    `;

    // ... rest of the code ...
});

// Add to your CSS
.time-badge {
    display: inline-block;
    background-color: #e6f4ea;
    color: #137333;
    font-size: 0.8em;
    padding: 2px 6px;
    border-radius: 4px;
    margin-left: 5px;
    border: 1px solid #b7e1cd;
}
</script>
